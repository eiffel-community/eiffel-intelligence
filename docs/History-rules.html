<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 at 2018-12-11 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20181211" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Eiffel Intelligence &#x2013; History Rules</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

          
                      </head>
        <body class="topBarEnabled">
          
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top navbar-inverse">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                                                                                    <a class="brand" href="./" >

                                
                                    Eiffel Intelligence
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="Home">Home</a>
</li>
                  
                      <li>      <a href="Configuration.html"  title="Configuration">Configuration</a>
</li>
                  
                      <li>      <a href="Running-Eiffel-Intelligence.html"  title="Running Eiffel Intelligence">Running Eiffel Intelligence</a>
</li>
                  
                      <li class="dropdown-submenu">
                                      <a href="REST-API.html"  title="REST API">REST API</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="Query.html"  title="Query">Query</a>
</li>
                                  <li>      <a href="Running-rules-on-objects.html"  title="Running rules on objects">Running rules on objects</a>
</li>
                                  <li>      <a href="Authentication.html"  title="Authentication">Authentication</a>
</li>
                                  <li>      <a href="Subscription-API.html"  title="Subscriptions">Subscriptions</a>
</li>
                                  <li>      <a href="Download-Files.html"  title="Download files">Download files</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="Subscriptions.html"  title="Subscriptions">Subscriptions</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="REST-POST-notification.html"  title="REST POST notification">REST POST notification</a>
</li>
                                  <li>      <a href="Email-notification.html"  title="Email notification">Email notification</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="Rules.html"  title="Rules">Rules</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="MergeResolverRules.html"  title="Merge Resolver Rules">Merge Resolver Rules</a>
</li>
                                  <li>      <a href="History-rules.html"  title="History Rules">History Rules</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="Step-by-Step-Aggregation.html"  title="Step-by-step aggregation">Step-by-step aggregation</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="ArtifactCreatedEvent-aggregation.html"  title="EiffelArtifactCreatedEvent aggregation">EiffelArtifactCreatedEvent aggregation</a>
</li>
                                  <li>      <a href="EiffelTestCaseTriggeredEvent-Aggregation.html"  title="EiffelTestCaseTriggeredEvent aggregation">EiffelTestCaseTriggeredEvent aggregation</a>
</li>
                                  <li>      <a href="EiffelTestCaseStartedEvent-aggregation.html"  title="EiffelTestCaseStartedEvent aggregation">EiffelTestCaseStartedEvent aggregation</a>
</li>
                                  <li>      <a href="EiffelTestCaseFinishedEvent-aggregation.html"  title="EiffelTestCaseFinishedEvent aggregation">EiffelTestCaseFinishedEvent aggregation</a>
</li>
                                  <li>      <a href="EiffelArtifactPublishedEvent-Aggregation.html"  title="EiffelArtifactPublishedEvent aggregation">EiffelArtifactPublishedEvent aggregation</a>
</li>
                                  <li>      <a href="EiffelConfidenceLevelModifiedEvent-Aggregation.html"  title="EiffelConfidenceLevelModifiedEvent">EiffelConfidenceLevelModifiedEvent</a>
</li>
                                  <li>      <a href="Step-by-Step-Subscription-Notification.html"  title="Step-by-step subscription notification">Step-by-step subscription notification</a>
</li>
                              </ul>
            </li>
                  
                      <li>      <a href="Known-limitations.html"  title="Known limitations">Known limitations</a>
</li>
                          </ul>
      </li>
                  </ul>
          
          
          
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Eiffel Intelligence</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                              <li class="">
                    <a href="index.html" title="Home">
        Home</a>
                    <span class="divider">-</span>
      </li>
        <li class="active ">History Rules</li>
        
              
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2018-12-11</li>
              <li id="projectVersion" class="pull-right">
                    Version: 0.0.18
        </li>
            
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Home">
          <span class="none"></span>
        Home</a>
            </li>
                
      <li>
  
                          <a href="Configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="Running-Eiffel-Intelligence.html" title="Running Eiffel Intelligence">
          <span class="none"></span>
        Running Eiffel Intelligence</a>
            </li>
                                                                                                                                          
      <li>
  
                          <a href="REST-API.html" title="REST API">
          <span class="icon-chevron-right"></span>
        REST API</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="Subscriptions.html" title="Subscriptions">
          <span class="icon-chevron-right"></span>
        Subscriptions</a>
                  </li>
                                                                                              
      <li>
  
                          <a href="Rules.html" title="Rules">
          <span class="icon-chevron-down"></span>
        Rules</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="MergeResolverRules.html" title="Merge Resolver Rules">
          <span class="none"></span>
        Merge Resolver Rules</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>History Rules</a>
          </li>
              </ul>
        </li>
                                                                                                                                                                              
      <li>
  
                          <a href="Step-by-Step-Aggregation.html" title="Step-by-step aggregation">
          <span class="icon-chevron-right"></span>
        Step-by-step aggregation</a>
                  </li>
                
      <li>
  
                          <a href="Known-limitations.html" title="Known limitations">
          <span class="none"></span>
        Known limitations</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>History Rules</h1>
<p><b>History Rules</b> below are used if you need to aggregate data from existing events linked upstream by received event.  An API to <b>ER (Event Repository)</b> that returns the historical events in right format must be configured in application.properties.</p>
<p><b>HistoryExtractionRules</b> - JSON object of JMESPath identifier(s) which will create or modify the existing data in aggregated object for internal composition, same as &#x201c;ExtractionRules&#x201d;.</p>
<p><b>HistoryPathRules</b> - JMESPath identifier of the place where to insert the JSON object from &#x201c;HistoryExtractionRules&#x201d; in aggregated object, same as &#x201c;MergeResolverRules&#x201d; but it is relative to its position in the tree path returned from ER. The path for merging history data will get as long as the depth of the tree where your historical event exists.</p>
<p>A step by step example will be presented using <a class="externalLink" href="https://github.com/Ericsson/eiffel-intelligence/blob/master/src/main/resources/ArtifactRules_new.json">artifact aggregation rules</a>.</p>
<p>Assume that an EiffelArtifactCreatedEvent is received and the upstream response tree looks like <a class="externalLink" href="https://github.com/Ericsson/eiffel-intelligence/blob/master/src/test/resources/upStreamResultFile.json">this</a>.</p>
<p>The starting aggregated object is :</p>

<div>
<div>
<pre class="source">{
   &quot;id&quot;:&quot;6acc3c87-75e0-4b6d-88f5-b1a5d4e62b43&quot;,
   &quot;type&quot;:&quot;EiffelArtifactCreatedEvent&quot;,
   &quot;time&quot;:1481875891763,
   &quot;gav&quot;:{
      &quot;artifactId&quot;:&quot;sub-system&quot;,
      &quot;version&quot;:&quot;1.1.0&quot;,
      &quot;groupId&quot;:&quot;com.mycompany.myproduct&quot;
   },
   &quot;fileInformation&quot;:[
      {
         &quot;classifier&quot;:&quot;debug&quot;,
         &quot;extension&quot;:&quot;jar&quot;
      },
      {
         &quot;classifier&quot;:&quot;test&quot;,
         &quot;extension&quot;:&quot;txt&quot;
      },
      {
         &quot;classifier&quot;:&quot;application&quot;,
         &quot;extension&quot;:&quot;exe&quot;
      }
   ],
   &quot;buildCommand&quot;:null,
   &quot;TemplateName&quot;:&quot;ARTIFACT_1&quot;
}
</pre></div></div>

<p>The first event to be traversed in the tree is an EiffelCompositionDefinedEvent and the JSON object extracted from it with <b>HistoryExtractionRules</b> is</p>

<div>
<div>
<pre class="source">{&quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66de47&quot;,&quot;time&quot;:2000,&quot;name&quot;:&quot;My composition&quot;}
</pre></div></div>

<p>and it will be appended at following location in aggregated object</p>

<div>
<div>
<pre class="source">internalComposition.compositions.0
</pre></div></div>

<p>This location is at the root object since this event is under the start EiffelArtifactCreatedEvent.</p>
<p>The new aggregated object is now:</p>

<div>
<div>
<pre class="source">{
   &quot;fileInformation&quot;:[
      {
         &quot;extension&quot;:&quot;jar&quot;,
         &quot;classifier&quot;:&quot;debug&quot;
      },
      {
         &quot;extension&quot;:&quot;txt&quot;,
         &quot;classifier&quot;:&quot;test&quot;
      },
      {
         &quot;extension&quot;:&quot;exe&quot;,
         &quot;classifier&quot;:&quot;application&quot;
      }
   ],
   &quot;buildCommand&quot;:null,
   // internalComposition is the new addition
   &quot;internalComposition&quot;:{
      &quot;compositions&quot;:[
         {
            &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66de47&quot;,
            &quot;name&quot;:&quot;My composition&quot;,
            &quot;time&quot;:2000
         }
      ]
   },
   &quot;TemplateName&quot;:&quot;ARTIFACT_1&quot;,
   &quot;id&quot;:&quot;6acc3c87-75e0-4b6d-88f5-b1a5d4e62b43&quot;,
   &quot;time&quot;:1481875891763,
   &quot;type&quot;:&quot;EiffelArtifactCreatedEvent&quot;,
   &quot;gav&quot;:{
      &quot;groupId&quot;:&quot;com.mycompany.myproduct&quot;,
      &quot;artifactId&quot;:&quot;sub-system&quot;,
      &quot;version&quot;:&quot;1.1.0&quot;
   }
}
</pre></div></div>

<p>The next event to be traversed  is an EiffelArtifactCreatedEvent that previous EiffelCompositionDefinedEvent links to and the JSON object extracted from it with <b>HistoryExtractionRules</b> is</p>

<div>
<div>
<pre class="source">{
   &quot;id&quot;:&quot;1100572b-c3j4-441e-abc9-b62f48080011&quot;,
   &quot;gav&quot;:{
      &quot;version&quot;:&quot;1.33.0&quot;,
      &quot;artifactId&quot;:&quot;other-system&quot;,
      &quot;groupId&quot;:&quot;com.othercompany.otherproduct&quot;
   },
   &quot;fileInformation&quot;:[
      {
         &quot;extension&quot;:&quot;jar&quot;,
         &quot;classifier&quot;:&quot;debug&quot;
      }
   ]
}
</pre></div></div>

<p>and it will be appended at following location in aggregated object</p>
<p>internalComposition.compositions.0.artifacts.0</p>
<p><i><b>artifacts.0</b></i> is given by <b>HistoryPathRules</b> for EiffelArtifactCreatedEvent and has been appended to previous path.</p>
<p>The resulting aggregated object is now:</p>

<div>
<div>
<pre class="source">{
   &quot;fileInformation&quot;:[
      {
         &quot;extension&quot;:&quot;jar&quot;,
         &quot;classifier&quot;:&quot;debug&quot;
      },
      {
         &quot;extension&quot;:&quot;txt&quot;,
         &quot;classifier&quot;:&quot;test&quot;
      },
      {
         &quot;extension&quot;:&quot;exe&quot;,
         &quot;classifier&quot;:&quot;application&quot;
      }
   ],
   &quot;buildCommand&quot;:null,
   &quot;internalComposition&quot;:{
      &quot;compositions&quot;:[
         {
            &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66de47&quot;,
            &quot;name&quot;:&quot;My composition&quot;,
            &quot;time&quot;:2000,
            // artifacts is the new addition
            &quot;artifacts&quot;:[
               {
                  &quot;fileInformation&quot;:[
                     {
                        &quot;extension&quot;:&quot;jar&quot;,
                        &quot;classifier&quot;:&quot;debug&quot;
                     }
                  ],
                  &quot;id&quot;:&quot;1100572b-c3j4-441e-abc9-b62f48080011&quot;,
                  &quot;gav&quot;:{
                     &quot;groupId&quot;:&quot;com.othercompany.otherproduct&quot;,
                     &quot;artifactId&quot;:&quot;other-system&quot;,
                     &quot;version&quot;:&quot;1.33.0&quot;
                  }
               }
            ]
         }
      ]
   },
   &quot;TemplateName&quot;:&quot;ARTIFACT_1&quot;,
   &quot;id&quot;:&quot;6acc3c87-75e0-4b6d-88f5-b1a5d4e62b43&quot;,
   &quot;time&quot;:1481875891763,
   &quot;type&quot;:&quot;EiffelArtifactCreatedEvent&quot;,
   &quot;gav&quot;:{
      &quot;groupId&quot;:&quot;com.mycompany.myproduct&quot;,
      &quot;artifactId&quot;:&quot;sub-system&quot;,
      &quot;version&quot;:&quot;1.1.0&quot;
   }
}
</pre></div></div>

<p>We continue with aggregating the <b>EiffelCompositionDefinedEvent</b> linked by latest EiffelArtifactCreatedEvent we aggregated. Its <b>HistoryExtractionRule</b> results in:</p>

<div>
<div>
<pre class="source">{&quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66da4j&quot;,&quot;time&quot;:5005,&quot;name&quot;:&quot;Other composition&quot;}
</pre></div></div>

<p>with path for merge:</p>

<div>
<div>
<pre class="source">internalComposition.compositions.0 
</pre></div></div>

<p>which appended to previous path become:</p>

<div>
<div>
<pre class="source">internalComposition.compositions.0.artifacts.0.internalComposition.compositions.0
</pre></div></div>

<p>and the new aggregated object is:</p>

<div>
<div>
<pre class="source">{
   &quot;fileInformation&quot;:[
      {
         &quot;extension&quot;:&quot;jar&quot;,
         &quot;classifier&quot;:&quot;debug&quot;
      },
      {
         &quot;extension&quot;:&quot;txt&quot;,
         &quot;classifier&quot;:&quot;test&quot;
      },
      {
         &quot;extension&quot;:&quot;exe&quot;,
         &quot;classifier&quot;:&quot;application&quot;
      }
   ],
   &quot;buildCommand&quot;:null,
   &quot;internalComposition&quot;:{
      &quot;compositions&quot;:[
         {
            &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66de47&quot;,
            &quot;name&quot;:&quot;My composition&quot;,
            &quot;time&quot;:2000,
            &quot;artifacts&quot;:[
               {
                  &quot;fileInformation&quot;:[
                     {
                        &quot;extension&quot;:&quot;jar&quot;,
                        &quot;classifier&quot;:&quot;debug&quot;
                     }
                  ],
                  // internalComposition is the new addition
                  &quot;internalComposition&quot;:{
                     &quot;compositions&quot;:[
                        {
                           &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66da4j&quot;,
                           &quot;name&quot;:&quot;Other composition&quot;,
                           &quot;time&quot;:5005
                        }
                     ]
                  },
                  &quot;id&quot;:&quot;1100572b-c3j4-441e-abc9-b62f48080011&quot;,
                  &quot;gav&quot;:{
                     &quot;groupId&quot;:&quot;com.othercompany.otherproduct&quot;,
                     &quot;artifactId&quot;:&quot;other-system&quot;,
                     &quot;version&quot;:&quot;1.33.0&quot;
                  }
               }
            ]
         }
      ]
   },
   &quot;TemplateName&quot;:&quot;ARTIFACT_1&quot;,
   &quot;id&quot;:&quot;6acc3c87-75e0-4b6d-88f5-b1a5d4e62b43&quot;,
   &quot;time&quot;:1481875891763,
   &quot;type&quot;:&quot;EiffelArtifactCreatedEvent&quot;,
   &quot;gav&quot;:{
      &quot;groupId&quot;:&quot;com.mycompany.myproduct&quot;,
      &quot;artifactId&quot;:&quot;sub-system&quot;,
      &quot;version&quot;:&quot;1.1.0&quot;
   }
}
</pre></div></div>

<p>You can see that this latest <i>internalComposition</i> section was added to the latest artifacts element in the upper <i>internalComposition</i> section. This is also a reflection of the upstream tree returned from <i>Event Repository</i>.</p>
<p>We move further down the tree and will aggregate <b>EiffelSourceChangeSubmittedEvent</b> and after applying its <b>HistoryExtractionRule</b> we get</p>

<div>
<div>
<pre class="source">{&quot;SCSEventId&quot;:&quot;3ce9df6e-cd45-4320-ae66-945f038caa1b&quot;,&quot;gitIdentifier&quot;:null,&quot;submitter&quot;:{&quot;name&quot;:&quot;Jane Doe&quot;,&quot;email&quot;:&quot;jane.doe@company.com&quot;}}
</pre></div></div>

<p>with relative path for merge</p>

<div>
<div>
<pre class="source">sourceChanges.0
</pre></div></div>

<p>which will give us the absolute path for merge</p>

<div>
<div>
<pre class="source">internalComposition.compositions.0.artifacts.0.internalComposition.compositions.0.sourceChanges.0
</pre></div></div>

<p>and the aggregated object will now look like:</p>

<div>
<div>
<pre class="source">{
   &quot;fileInformation&quot;:[
      {
         &quot;extension&quot;:&quot;jar&quot;,
         &quot;classifier&quot;:&quot;debug&quot;
      },
      {
         &quot;extension&quot;:&quot;txt&quot;,
         &quot;classifier&quot;:&quot;test&quot;
      },
      {
         &quot;extension&quot;:&quot;exe&quot;,
         &quot;classifier&quot;:&quot;application&quot;
      }
   ],
   &quot;buildCommand&quot;:null,
   &quot;internalComposition&quot;:{
      &quot;compositions&quot;:[
         {
            &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66de47&quot;,
            &quot;name&quot;:&quot;My composition&quot;,
            &quot;time&quot;:2000,
            &quot;artifacts&quot;:[
               {
                  &quot;fileInformation&quot;:[
                     {
                        &quot;extension&quot;:&quot;jar&quot;,
                        &quot;classifier&quot;:&quot;debug&quot;
                     }
                  ],
                  &quot;internalComposition&quot;:{
                     &quot;compositions&quot;:[
                        {
                           &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66da4j&quot;,
                           // sourceChanges is the new addition
                           &quot;sourceChanges&quot;:[
                              {
                                 &quot;submitter&quot;:{
                                    &quot;name&quot;:&quot;Jane Doe&quot;,
                                    &quot;email&quot;:&quot;jane.doe@company.com&quot;
                                 },
                                 &quot;SCSEventId&quot;:&quot;3ce9df6e-cd45-4320-ae66-945f038caa1b&quot;,
                                 &quot;gitIdentifier&quot;:null
                              }
                           ],
                           &quot;name&quot;:&quot;Other composition&quot;,
                           &quot;time&quot;:5005
                        }
                     ]
                  },
                  &quot;id&quot;:&quot;1100572b-c3j4-441e-abc9-b62f48080011&quot;,
                  &quot;gav&quot;:{
                     &quot;groupId&quot;:&quot;com.othercompany.otherproduct&quot;,
                     &quot;artifactId&quot;:&quot;other-system&quot;,
                     &quot;version&quot;:&quot;1.33.0&quot;
                  }
               }
            ]
         }
      ]
   },
   &quot;TemplateName&quot;:&quot;ARTIFACT_1&quot;,
   &quot;id&quot;:&quot;6acc3c87-75e0-4b6d-88f5-b1a5d4e62b43&quot;,
   &quot;time&quot;:1481875891763,
   &quot;type&quot;:&quot;EiffelArtifactCreatedEvent&quot;,
   &quot;gav&quot;:{
      &quot;groupId&quot;:&quot;com.mycompany.myproduct&quot;,
      &quot;artifactId&quot;:&quot;sub-system&quot;,
      &quot;version&quot;:&quot;1.1.0&quot;
   }
}
</pre></div></div>

<p>Now it is time to aggregate the <b>EiffelSourceChangeCreatedEvent</b> and its <b>HistoryExtractionRule</b> gives us following object to merge:</p>

<div>
<div>
<pre class="source">{
   &quot;SCCEventId&quot;:&quot;ac085e24-ac4c-41be-912d-08c7afd32285&quot;,
   &quot;author&quot;:{
      &quot;name&quot;:&quot;John Doe&quot;,
      &quot;email&quot;:&quot;john.doe@company.com&quot;,
      &quot;id&quot;:&quot;johndoe&quot;,
      &quot;group&quot;:&quot;Team Gophers&quot;
   },
   &quot;issues&quot;:[

   ]
}
</pre></div></div>

<p>with relative path</p>

<div>
<div>
<pre class="source">sourceCreations.0
</pre></div></div>

<p>which will give us the absolute path for merge</p>

<div>
<div>
<pre class="source">internalComposition.compositions.0.artifacts.0.internalComposition.compositions.0.sourceChanges.0.sourceCreations.0
</pre></div></div>

<p>and the aggregated object will now look like:</p>

<div>
<div>
<pre class="source">{
   &quot;fileInformation&quot;:[
      {
         &quot;extension&quot;:&quot;jar&quot;,
         &quot;classifier&quot;:&quot;debug&quot;
      },
      {
         &quot;extension&quot;:&quot;txt&quot;,
         &quot;classifier&quot;:&quot;test&quot;
      },
      {
         &quot;extension&quot;:&quot;exe&quot;,
         &quot;classifier&quot;:&quot;application&quot;
      }
   ],
   &quot;buildCommand&quot;:null,
   &quot;internalComposition&quot;:{
      &quot;compositions&quot;:[
         {
            &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66de47&quot;,
            &quot;name&quot;:&quot;My composition&quot;,
            &quot;time&quot;:2000,
            &quot;artifacts&quot;:[
               {
                  &quot;fileInformation&quot;:[
                     {
                        &quot;extension&quot;:&quot;jar&quot;,
                        &quot;classifier&quot;:&quot;debug&quot;
                     }
                  ],
                  &quot;internalComposition&quot;:{
                     &quot;compositions&quot;:[
                        {
                           &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66da4j&quot;,
                           &quot;sourceChanges&quot;:[
                              {
                                 &quot;submitter&quot;:{
                                    &quot;name&quot;:&quot;Jane Doe&quot;,
                                    &quot;email&quot;:&quot;jane.doe@company.com&quot;
                                 },
                                 &quot;SCSEventId&quot;:&quot;3ce9df6e-cd45-4320-ae66-945f038caa1b&quot;,
                                 &quot;gitIdentifier&quot;:null,
                                 // sourceCreations is the new addition
                                 &quot;sourceCreations&quot;:[
                                    {
                                       &quot;SCCEventId&quot;:&quot;ac085e24-ac4c-41be-912d-08c7afd32285&quot;,
                                       &quot;author&quot;:{
                                          &quot;name&quot;:&quot;John Doe&quot;,
                                          &quot;id&quot;:&quot;johndoe&quot;,
                                          &quot;email&quot;:&quot;john.doe@company.com&quot;,
                                          &quot;group&quot;:&quot;Team Gophers&quot;
                                       },
                                       &quot;issues&quot;:[

                                       ]
                                    }
                                 ]
                              }
                           ],
                           &quot;name&quot;:&quot;Other composition&quot;,
                           &quot;time&quot;:5005
                        }
                     ]
                  },
                  &quot;id&quot;:&quot;1100572b-c3j4-441e-abc9-b62f48080011&quot;,
                  &quot;gav&quot;:{
                     &quot;groupId&quot;:&quot;com.othercompany.otherproduct&quot;,
                     &quot;artifactId&quot;:&quot;other-system&quot;,
                     &quot;version&quot;:&quot;1.33.0&quot;
                  }
               }
            ]
         }
      ]
   },
   &quot;TemplateName&quot;:&quot;ARTIFACT_1&quot;,
   &quot;id&quot;:&quot;6acc3c87-75e0-4b6d-88f5-b1a5d4e62b43&quot;,
   &quot;time&quot;:1481875891763,
   &quot;type&quot;:&quot;EiffelArtifactCreatedEvent&quot;,
   &quot;gav&quot;:{
      &quot;groupId&quot;:&quot;com.mycompany.myproduct&quot;,
      &quot;artifactId&quot;:&quot;sub-system&quot;,
      &quot;version&quot;:&quot;1.1.0&quot;
   }
}
</pre></div></div>

<p>Since the tree returns the first <b>EiffelSourceChangeCreatedEvent</b> we aggregate following information from it too.</p>

<div>
<div>
<pre class="source">{
   &quot;SCCEventId&quot;:&quot;552ad6a4-c522-47e2-9195-0481930979e4&quot;,
   &quot;author&quot;:null,
   &quot;issues&quot;:[
      {
         &quot;type&quot;:&quot;BUG&quot;,
         &quot;tracker&quot;:&quot;JIRA&quot;,
         &quot;id&quot;:&quot;JIRA-1234&quot;,
         &quot;uri&quot;:&quot;http://jira.company.com/browse/JIRA-1234&quot;,
         &quot;transition&quot;:&quot;RESOLVED&quot;
      }
   ]
}
</pre></div></div>

<p>with relative path:</p>

<div>
<div>
<pre class="source">sourceCreations.1
</pre></div></div>

<p>and absolute path:</p>

<div>
<div>
<pre class="source">internalComposition.compositions.0.artifacts.0.internalComposition.compositions.0.sourceChanges.0.sourceCreations.1.SCCEventId
</pre></div></div>

<p>which gives us the following aggregated object:</p>

<div>
<div>
<pre class="source">{
   &quot;fileInformation&quot;:[
      {
         &quot;extension&quot;:&quot;jar&quot;,
         &quot;classifier&quot;:&quot;debug&quot;
      },
      {
         &quot;extension&quot;:&quot;txt&quot;,
         &quot;classifier&quot;:&quot;test&quot;
      },
      {
         &quot;extension&quot;:&quot;exe&quot;,
         &quot;classifier&quot;:&quot;application&quot;
      }
   ],
   &quot;buildCommand&quot;:null,
   &quot;internalComposition&quot;:{
      &quot;compositions&quot;:[
         {
            &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66de47&quot;,
            &quot;name&quot;:&quot;My composition&quot;,
            &quot;time&quot;:2000,
            &quot;artifacts&quot;:[
               {
                  &quot;fileInformation&quot;:[
                     {
                        &quot;extension&quot;:&quot;jar&quot;,
                        &quot;classifier&quot;:&quot;debug&quot;
                     }
                  ],
                  &quot;internalComposition&quot;:{
                     &quot;compositions&quot;:[
                        {
                           &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66da4j&quot;,
                           &quot;sourceChanges&quot;:[
                              {
                                 &quot;submitter&quot;:{
                                    &quot;name&quot;:&quot;Jane Doe&quot;,
                                    &quot;email&quot;:&quot;jane.doe@company.com&quot;
                                 },
                                 &quot;SCSEventId&quot;:&quot;3ce9df6e-cd45-4320-ae66-945f038caa1b&quot;,
                                 &quot;gitIdentifier&quot;:null,
                                 &quot;sourceCreations&quot;:[
                                    {
                                       &quot;SCCEventId&quot;:&quot;ac085e24-ac4c-41be-912d-08c7afd32285&quot;,
                                       &quot;author&quot;:{
                                          &quot;name&quot;:&quot;John Doe&quot;,
                                          &quot;id&quot;:&quot;johndoe&quot;,
                                          &quot;email&quot;:&quot;john.doe@company.com&quot;,
                                          &quot;group&quot;:&quot;Team Gophers&quot;
                                       },
                                       &quot;issues&quot;:[

                                       ]
                                    },
                                    // This second entry in sourceCreations is the new additions
                                    {
                                       &quot;SCCEventId&quot;:&quot;552ad6a4-c522-47e2-9195-0481930979e4&quot;,
                                       &quot;author&quot;:null,
                                       &quot;issues&quot;:[
                                          {
                                             &quot;tracker&quot;:&quot;JIRA&quot;,
                                             &quot;id&quot;:&quot;JIRA-1234&quot;,
                                             &quot;type&quot;:&quot;BUG&quot;,
                                             &quot;uri&quot;:&quot;http://jira.company.com/browse/JIRA-1234&quot;,
                                             &quot;transition&quot;:&quot;RESOLVED&quot;
                                          }
                                       ]
                                    }
                                 ]
                              }
                           ],
                           &quot;name&quot;:&quot;Other composition&quot;,
                           &quot;time&quot;:5005
                        }
                     ]
                  },
                  &quot;id&quot;:&quot;1100572b-c3j4-441e-abc9-b62f48080011&quot;,
                  &quot;gav&quot;:{
                     &quot;groupId&quot;:&quot;com.othercompany.otherproduct&quot;,
                     &quot;artifactId&quot;:&quot;other-system&quot;,
                     &quot;version&quot;:&quot;1.33.0&quot;
                  }
               }
            ]
         }
      ]
   },
   &quot;TemplateName&quot;:&quot;ARTIFACT_1&quot;,
   &quot;id&quot;:&quot;6acc3c87-75e0-4b6d-88f5-b1a5d4e62b43&quot;,
   &quot;time&quot;:1481875891763,
   &quot;type&quot;:&quot;EiffelArtifactCreatedEvent&quot;,
   &quot;gav&quot;:{
      &quot;groupId&quot;:&quot;com.mycompany.myproduct&quot;,
      &quot;artifactId&quot;:&quot;sub-system&quot;,
      &quot;version&quot;:&quot;1.1.0&quot;
   }
}
</pre></div></div>

<p>Now we return back in the tree and process the second <b>EiffelArtifactCreatedEvent</b> making the first composition. So we will append:</p>

<div>
<div>
<pre class="source">{
   &quot;id&quot;:&quot;4400572b-c3j4-441e-abc9-b62f48080033&quot;,
   &quot;gav&quot;:{
      &quot;version&quot;:&quot;1.99.0&quot;,
      &quot;artifactId&quot;:&quot;internal-system&quot;,
      &quot;groupId&quot;:&quot;com.internalcompany.internalproduct&quot;
   },
   &quot;fileInformation&quot;:[
      {
         &quot;extension&quot;:&quot;jar&quot;,
         &quot;classifier&quot;:&quot;debug&quot;
      }
   ]
}
</pre></div></div>

<p>with relative path:</p>

<div>
<div>
<pre class="source">artifacts.1
</pre></div></div>

<p>and absolute path:</p>
<p>internalComposition.compositions.0.artifacts.1</p>
<p>This results in following aggregated object:</p>

<div>
<div>
<pre class="source">{
   &quot;fileInformation&quot;:[
      {
         &quot;extension&quot;:&quot;jar&quot;,
         &quot;classifier&quot;:&quot;debug&quot;
      },
      {
         &quot;extension&quot;:&quot;txt&quot;,
         &quot;classifier&quot;:&quot;test&quot;
      },
      {
         &quot;extension&quot;:&quot;exe&quot;,
         &quot;classifier&quot;:&quot;application&quot;
      }
   ],
   &quot;buildCommand&quot;:null,
   &quot;internalComposition&quot;:{
      &quot;compositions&quot;:[
         {
            &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66de47&quot;,
            &quot;name&quot;:&quot;My composition&quot;,
            &quot;time&quot;:2000,
            &quot;artifacts&quot;:[
               {
                  &quot;fileInformation&quot;:[
                     {
                        &quot;extension&quot;:&quot;jar&quot;,
                        &quot;classifier&quot;:&quot;debug&quot;
                     }
                  ],
                  &quot;internalComposition&quot;:{
                     &quot;compositions&quot;:[
                        {
                           &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66da4j&quot;,
                           &quot;sourceChanges&quot;:[
                              {
                                 &quot;submitter&quot;:{
                                    &quot;name&quot;:&quot;Jane Doe&quot;,
                                    &quot;email&quot;:&quot;jane.doe@company.com&quot;
                                 },
                                 &quot;SCSEventId&quot;:&quot;3ce9df6e-cd45-4320-ae66-945f038caa1b&quot;,
                                 &quot;gitIdentifier&quot;:null,
                                 &quot;sourceCreations&quot;:[
                                    {
                                       &quot;SCCEventId&quot;:&quot;ac085e24-ac4c-41be-912d-08c7afd32285&quot;,
                                       &quot;author&quot;:{
                                          &quot;name&quot;:&quot;John Doe&quot;,
                                          &quot;id&quot;:&quot;johndoe&quot;,
                                          &quot;email&quot;:&quot;john.doe@company.com&quot;,
                                          &quot;group&quot;:&quot;Team Gophers&quot;
                                       },
                                       &quot;issues&quot;:[

                                       ]
                                    },
                                    {
                                       &quot;SCCEventId&quot;:&quot;552ad6a4-c522-47e2-9195-0481930979e4&quot;,
                                       &quot;author&quot;:null,
                                       &quot;issues&quot;:[
                                          {
                                             &quot;tracker&quot;:&quot;JIRA&quot;,
                                             &quot;id&quot;:&quot;JIRA-1234&quot;,
                                             &quot;type&quot;:&quot;BUG&quot;,
                                             &quot;uri&quot;:&quot;http://jira.company.com/browse/JIRA-1234&quot;,
                                             &quot;transition&quot;:&quot;RESOLVED&quot;
                                          }
                                       ]
                                    }
                                 ]
                              }
                           ],
                           &quot;name&quot;:&quot;Other composition&quot;,
                           &quot;time&quot;:5005
                        }
                     ]
                  },
                  &quot;id&quot;:&quot;1100572b-c3j4-441e-abc9-b62f48080011&quot;,
                  &quot;gav&quot;:{
                     &quot;groupId&quot;:&quot;com.othercompany.otherproduct&quot;,
                     &quot;artifactId&quot;:&quot;other-system&quot;,
                     &quot;version&quot;:&quot;1.33.0&quot;
                  }
               },
               // this second artifact information is the new addition to 
               // internal composition 
               {
                  &quot;fileInformation&quot;:[
                     {
                        &quot;extension&quot;:&quot;jar&quot;,
                        &quot;classifier&quot;:&quot;debug&quot;
                     }
                  ],
                  &quot;id&quot;:&quot;4400572b-c3j4-441e-abc9-b62f48080033&quot;,
                  &quot;gav&quot;:{
                     &quot;groupId&quot;:&quot;com.internalcompany.internalproduct&quot;,
                     &quot;artifactId&quot;:&quot;internal-system&quot;,
                     &quot;version&quot;:&quot;1.99.0&quot;
                  }
               }
            ]
         }
      ]
   },
   &quot;TemplateName&quot;:&quot;ARTIFACT_1&quot;,
   &quot;id&quot;:&quot;6acc3c87-75e0-4b6d-88f5-b1a5d4e62b43&quot;,
   &quot;time&quot;:1481875891763,
   &quot;type&quot;:&quot;EiffelArtifactCreatedEvent&quot;,
   &quot;gav&quot;:{
      &quot;groupId&quot;:&quot;com.mycompany.myproduct&quot;,
      &quot;artifactId&quot;:&quot;sub-system&quot;,
      &quot;version&quot;:&quot;1.1.0&quot;
   }
}
</pre></div></div>

<p>At last we aggregate the <b>EiffelArtifactCreatedEvent</b> that the received <b>EiffelArtifactCreatedEvent</b> links to. The same HistoryExtractionRule is used by all <b>EiffelArtifactCreatedEvent</b> and here we will get:</p>

<div>
<div>
<pre class="source">{
   &quot;id&quot;:&quot;1100572b-c3b4-461e-abc9-b62f48087011&quot;,
   &quot;gav&quot;:{
      &quot;version&quot;:&quot;1.33.0&quot;,
      &quot;artifactId&quot;:&quot;other-system&quot;,
      &quot;groupId&quot;:&quot;com.othercompany.secondproduct&quot;
   },
   &quot;fileInformation&quot;:[
      {
         &quot;extension&quot;:&quot;jar&quot;,
         &quot;classifier&quot;:&quot;debug&quot;
      }
   ]
}
</pre></div></div>

<p>to merge at relative path &quot;&quot; and absolute path:</p>

<div>
<div>
<pre class="source">artifacts.0
</pre></div></div>

<p>The final aggregated object is now:</p>

<div>
<div>
<pre class="source">{
   &quot;fileInformation&quot;:[
      {
         &quot;extension&quot;:&quot;jar&quot;,
         &quot;classifier&quot;:&quot;debug&quot;
      },
      {
         &quot;extension&quot;:&quot;txt&quot;,
         &quot;classifier&quot;:&quot;test&quot;
      },
      {
         &quot;extension&quot;:&quot;exe&quot;,
         &quot;classifier&quot;:&quot;application&quot;
      }
   ],
   &quot;buildCommand&quot;:null,
   &quot;internalComposition&quot;:{
      &quot;compositions&quot;:[
         {
            &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66de47&quot;,
            &quot;name&quot;:&quot;My composition&quot;,
            &quot;time&quot;:2000,
            &quot;artifacts&quot;:[
               {
                  &quot;fileInformation&quot;:[
                     {
                        &quot;extension&quot;:&quot;jar&quot;,
                        &quot;classifier&quot;:&quot;debug&quot;
                     }
                  ],
                  &quot;internalComposition&quot;:{
                     &quot;compositions&quot;:[
                        {
                           &quot;eventId&quot;:&quot;fb6ef12d-25fb-4d77-b9fd-87688e66da4j&quot;,
                           &quot;sourceChanges&quot;:[
                              {
                                 &quot;submitter&quot;:{
                                    &quot;name&quot;:&quot;Jane Doe&quot;,
                                    &quot;email&quot;:&quot;jane.doe@company.com&quot;
                                 },
                                 &quot;SCSEventId&quot;:&quot;3ce9df6e-cd45-4320-ae66-945f038caa1b&quot;,
                                 &quot;gitIdentifier&quot;:null,
                                 &quot;sourceCreations&quot;:[
                                    {
                                       &quot;SCCEventId&quot;:&quot;ac085e24-ac4c-41be-912d-08c7afd32285&quot;,
                                       &quot;author&quot;:{
                                          &quot;name&quot;:&quot;John Doe&quot;,
                                          &quot;id&quot;:&quot;johndoe&quot;,
                                          &quot;email&quot;:&quot;john.doe@company.com&quot;,
                                          &quot;group&quot;:&quot;Team Gophers&quot;
                                       },
                                       &quot;issues&quot;:[

                                       ]
                                    },
                                    {
                                       &quot;SCCEventId&quot;:&quot;552ad6a4-c522-47e2-9195-0481930979e4&quot;,
                                       &quot;author&quot;:null,
                                       &quot;issues&quot;:[
                                          {
                                             &quot;tracker&quot;:&quot;JIRA&quot;,
                                             &quot;id&quot;:&quot;JIRA-1234&quot;,
                                             &quot;type&quot;:&quot;BUG&quot;,
                                             &quot;uri&quot;:&quot;http:\/\/jira.company.com\/browse\/JIRA-1234&quot;,
                                             &quot;transition&quot;:&quot;RESOLVED&quot;
                                          }
                                       ]
                                    }
                                 ]
                              }
                           ],
                           &quot;name&quot;:&quot;Other composition&quot;,
                           &quot;time&quot;:5005
                        }
                     ]
                  },
                  &quot;id&quot;:&quot;1100572b-c3j4-441e-abc9-b62f48080011&quot;,
                  &quot;gav&quot;:{
                     &quot;groupId&quot;:&quot;com.othercompany.otherproduct&quot;,
                     &quot;artifactId&quot;:&quot;other-system&quot;,
                     &quot;version&quot;:&quot;1.33.0&quot;
                  }
               },
               {
                  &quot;fileInformation&quot;:[
                     {
                        &quot;extension&quot;:&quot;jar&quot;,
                        &quot;classifier&quot;:&quot;debug&quot;
                     }
                  ],
                  &quot;id&quot;:&quot;4400572b-c3j4-441e-abc9-b62f48080033&quot;,
                  &quot;gav&quot;:{
                     &quot;groupId&quot;:&quot;com.internalcompany.internalproduct&quot;,
                     &quot;artifactId&quot;:&quot;internal-system&quot;,
                     &quot;version&quot;:&quot;1.99.0&quot;
                  }
               }
            ]
         }
      ]
   },
   &quot;TemplateName&quot;:&quot;ARTIFACT_1&quot;,
   &quot;id&quot;:&quot;6acc3c87-75e0-4b6d-88f5-b1a5d4e62b43&quot;,
   &quot;time&quot;:1481875891763,
   &quot;type&quot;:&quot;EiffelArtifactCreatedEvent&quot;,
   &quot;gav&quot;:{
      &quot;groupId&quot;:&quot;com.mycompany.myproduct&quot;,
      &quot;artifactId&quot;:&quot;sub-system&quot;,
      &quot;version&quot;:&quot;1.1.0&quot;
   },
   // artifacts array is the last addition now
   &quot;artifacts&quot;:[
      {
         &quot;fileInformation&quot;:[
            {
               &quot;extension&quot;:&quot;jar&quot;,
               &quot;classifier&quot;:&quot;debug&quot;
            }
         ],
         &quot;id&quot;:&quot;1100572b-c3b4-461e-abc9-b62f48087011&quot;,
         &quot;gav&quot;:{
            &quot;groupId&quot;:&quot;com.othercompany.secondproduct&quot;,
            &quot;artifactId&quot;:&quot;other-system&quot;,
            &quot;version&quot;:&quot;1.33.0&quot;
         }
      }
   ]
}
</pre></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                          
                </div>

        
                </div>
    </footer>
        </body>
</html>
