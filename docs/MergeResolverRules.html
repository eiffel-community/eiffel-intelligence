<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 at 2018-12-11 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20181211" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Eiffel Intelligence &#x2013; Merge Resolver Rules</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

          
                      </head>
        <body class="topBarEnabled">
          
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top navbar-inverse">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                                                                                    <a class="brand" href="./" >

                                
                                    Eiffel Intelligence
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="Home">Home</a>
</li>
                  
                      <li>      <a href="Configuration.html"  title="Configuration">Configuration</a>
</li>
                  
                      <li>      <a href="Running-Eiffel-Intelligence.html"  title="Running Eiffel Intelligence">Running Eiffel Intelligence</a>
</li>
                  
                      <li class="dropdown-submenu">
                                      <a href="REST-API.html"  title="REST API">REST API</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="Query.html"  title="Query">Query</a>
</li>
                                  <li>      <a href="Running-rules-on-objects.html"  title="Running rules on objects">Running rules on objects</a>
</li>
                                  <li>      <a href="Authentication.html"  title="Authentication">Authentication</a>
</li>
                                  <li>      <a href="Subscription-API.html"  title="Subscriptions">Subscriptions</a>
</li>
                                  <li>      <a href="Download-Files.html"  title="Download files">Download files</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="Subscriptions.html"  title="Subscriptions">Subscriptions</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="REST-POST-notification.html"  title="REST POST notification">REST POST notification</a>
</li>
                                  <li>      <a href="Email-notification.html"  title="Email notification">Email notification</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="Rules.html"  title="Rules">Rules</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="MergeResolverRules.html"  title="Merge Resolver Rules">Merge Resolver Rules</a>
</li>
                                  <li>      <a href="History-rules.html"  title="History Rules">History Rules</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="Step-by-Step-Aggregation.html"  title="Step-by-step aggregation">Step-by-step aggregation</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="ArtifactCreatedEvent-aggregation.html"  title="EiffelArtifactCreatedEvent aggregation">EiffelArtifactCreatedEvent aggregation</a>
</li>
                                  <li>      <a href="EiffelTestCaseTriggeredEvent-Aggregation.html"  title="EiffelTestCaseTriggeredEvent aggregation">EiffelTestCaseTriggeredEvent aggregation</a>
</li>
                                  <li>      <a href="EiffelTestCaseStartedEvent-aggregation.html"  title="EiffelTestCaseStartedEvent aggregation">EiffelTestCaseStartedEvent aggregation</a>
</li>
                                  <li>      <a href="EiffelTestCaseFinishedEvent-aggregation.html"  title="EiffelTestCaseFinishedEvent aggregation">EiffelTestCaseFinishedEvent aggregation</a>
</li>
                                  <li>      <a href="EiffelArtifactPublishedEvent-Aggregation.html"  title="EiffelArtifactPublishedEvent aggregation">EiffelArtifactPublishedEvent aggregation</a>
</li>
                                  <li>      <a href="EiffelConfidenceLevelModifiedEvent-Aggregation.html"  title="EiffelConfidenceLevelModifiedEvent">EiffelConfidenceLevelModifiedEvent</a>
</li>
                                  <li>      <a href="Step-by-Step-Subscription-Notification.html"  title="Step-by-step subscription notification">Step-by-step subscription notification</a>
</li>
                              </ul>
            </li>
                  
                      <li>      <a href="Known-limitations.html"  title="Known limitations">Known limitations</a>
</li>
                          </ul>
      </li>
                  </ul>
          
          
          
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Eiffel Intelligence</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                              <li class="">
                    <a href="index.html" title="Home">
        Home</a>
                    <span class="divider">-</span>
      </li>
        <li class="active ">Merge Resolver Rules</li>
        
              
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2018-12-11</li>
              <li id="projectVersion" class="pull-right">
                    Version: 0.0.18
        </li>
            
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Home">
          <span class="none"></span>
        Home</a>
            </li>
                
      <li>
  
                          <a href="Configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="Running-Eiffel-Intelligence.html" title="Running Eiffel Intelligence">
          <span class="none"></span>
        Running Eiffel Intelligence</a>
            </li>
                                                                                                                                          
      <li>
  
                          <a href="REST-API.html" title="REST API">
          <span class="icon-chevron-right"></span>
        REST API</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="Subscriptions.html" title="Subscriptions">
          <span class="icon-chevron-right"></span>
        Subscriptions</a>
                  </li>
                                                                                              
      <li>
  
                          <a href="Rules.html" title="Rules">
          <span class="icon-chevron-down"></span>
        Rules</a>
                    <ul class="nav nav-list">
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Merge Resolver Rules</a>
          </li>
                    
      <li>
  
                          <a href="History-rules.html" title="History Rules">
          <span class="none"></span>
        History Rules</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                              
      <li>
  
                          <a href="Step-by-Step-Aggregation.html" title="Step-by-step aggregation">
          <span class="icon-chevron-right"></span>
        Step-by-step aggregation</a>
                  </li>
                
      <li>
  
                          <a href="Known-limitations.html" title="Known limitations">
          <span class="none"></span>
        Known limitations</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Merge Resolver Rules</h1>
<p>JMESPath identifier of the place where to insert the JSON object from <i>&#x201c;ExtractionRules&#x201d;</i>. If MergeResolverRules is null <i>&#x201c;ExtractionRules&#x201d;</i> object will be inserted to the root of aggregated object.</p>
<p>The location in the aggregated object where the extracted content will be merge can be specified with path elements and a value to exist at that, but not all elements of a path are needed. The aggregated object will be flattened and all paths that contains the path elements in the given order will be collected. Then we check the value and the path with the value is the winning path. If no value from the paths match the given value then we take the longest path that contains the given path elements.</p>
<p>Example object:</p>

<div>
<div>
<pre class="source">{
   &quot;id&quot;:&quot;eventId&quot;,
   &quot;fakeArray&quot;:[
      {
         &quot;event_id&quot;:&quot;fakeId&quot;,
         &quot;fake_data&quot;:&quot;also_fake&quot;
      }
   ],
   &quot;level1&quot;:{
      &quot;property1&quot;:&quot;p1value&quot;,
      &quot;level2&quot;:{
         &quot;property2&quot;:&quot;p2value&quot;,
         &quot;lvl2Array&quot;:[
            {
               &quot;oneElem&quot;:&quot;oneElemValue&quot;,
               &quot;2ndElem&quot;:{
                  &quot;3rdElem&quot;:&quot;3rdElemValue&quot;,
                  &quot;artifacts&quot;:[
                     {
                        &quot;event_id&quot;:&quot;artifact_id_1&quot;,
                        &quot;artifact_data&quot;:&quot;artifact1data&quot;
                     },
                     {
                        &quot;event_id&quot;:&quot;artifact_id_2&quot;,
                        &quot;artifact_data&quot;:&quot;artifact2data&quot;
                     }
                  ]
               }
            }
         ]
      }
   },
   &quot;type&quot;:&quot;eventType&quot;,
   &quot;test_cases&quot;:[
      {
         &quot;event_id&quot;:&quot;testcaseid1&quot;,
         &quot;test_data&quot;:&quot;testcase1data&quot;
      },
      {
         &quot;event_id&quot;:&quot;testcaseid2&quot;,
         &quot;test_data&quot;:&quot;testcase2data&quot;
      }
   ]
}
</pre></div></div>

<div class="section">
<h2><a name="Example_1:"></a>Example 1:</h2>

<div>
<div>
<pre class="source">&quot;MergeResolverRules&quot; : &quot;{level2:{event_id: %IdentifyRules%}}&quot;
</pre></div></div>

<p>will result after replacing the marker by EI in rule:</p>

<div>
<div>
<pre class="source">{level2:{event_id: someLevelId}}
</pre></div></div>

<p>With extracted content:</p>

<div>
<div>
<pre class="source">&quot;{test_time: some_time, test_name: some_name}&quot;
</pre></div></div>

<p>We get the below object to append to the root. We have also identified that level2 exists under level1 and so property2 will get three more siblings.</p>

<div>
<div>
<pre class="source">{
   level1:{
      level2:{
         test_time:some_time,
         event_id:someLevelId,
         test_name:some_name
      }
   }
}
</pre></div></div>

<p>The same result could have been achieved with merge rule:</p>

<div>
<div>
<pre class="source">&quot;MergeResolverRules&quot; : &quot;{level2:{property2: p2value}}&quot;
</pre></div></div>

<p>and extracted content:</p>

<div>
<div>
<pre class="source">&quot;{test_time: some_time, test_name: some_name, event_id: someLevelId}&quot;
</pre></div></div>
</div>
<div class="section">
<h2><a name="Example_2_-_array_aggregations:"></a>Example 2 - array aggregations:</h2>
<p>For aggregating arrays we use an array of JSON objects as merge rule.</p>

<div>
<div>
<pre class="source"> &quot;MergeResolverRules&quot; :&quot;[{NONEPATH:NONE},  {test_suite: [{test_suite_started_event_id: meta.id}]} ]&quot; 
</pre></div></div>

<p>and content object:</p>

<div>
<div>
<pre class="source">{test_suite_started_event_id: some_id, test_suite_name : some_name }    
</pre></div></div>

<p>The first element in the array will be used to find the location where the new array will be stored. If that location is not found then the root will be considered as the location for the array aggregation. In this example we have a path that will not be found in an aggregated object so an array with key name test_suite will be created and its first element will be the content object.</p>

<div>
<div>
<pre class="source">&quot;MergeResolverRules&quot;: &quot;[{test_suite_started_event_id: links | [?type=='IUT'] | [0].target},  {test_case : [{ test_case_triggered_event_id:meta.id}] }]&quot;,
</pre></div></div>

<p>The rule above helps us create an array for test cases or append a test case to a certain test suite identified by the linked id.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                          
                </div>

        
                </div>
    </footer>
        </body>
</html>
